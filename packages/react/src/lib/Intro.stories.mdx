import { Canvas, Meta, Story } from '@storybook/addon-docs'

import { Escape } from '.'
import { name, version } from '../../package.json'
import iconSpriteUrl from '../lib/storybookIconSpriteUrl'
import { View } from '../views'
import { fake, fakeTitle, seed } from './fake'

<Meta
  title="Introduction"
  parameters={{
    viewMode: 'docs',
    previewTabs: {
      canvas: { hidden: true },
    },
  }}
/>

export const ViewTemplate = (props) => (
  <View {...props} iconSpriteUrl={iconSpriteUrl} />
)

# Fluent Blocks

<span style={{ fontSize: '.88em' }}>
  <pre style={{ display: 'inline', fontSize: '1em' }}>{name}</pre> • v{version}
</span>

<img
  style={{
    borderRadius: '1rem',
    marginBlockStart: '1.2rem',
    marginBlockEnd: '2.4rem',
  }}
  src="/expression-studio_still.jpg"
  title="An abstract image representing a composition of various elements into a coherent whole. A still image from a short by Microsoft’s Expression Studio."
/>

## What is Fluent Blocks?

If you need to deliver software experiences in the Fluent design system, Fluent Blocks gives you the tools you need to deliver accessible and polished experiences just using JSON, so you can focus more on the content and leave the rest to these components.

When you use Fluent Blocks, you aren’t locked into its way of doing things — the components also provide plenty of opportunities to make the exceptions you need to make to deliver designs optimized for your app’s use-case. It’s a bundle-friendly library that ships components that can handle entire fully-composed experiences down to more intermediate patterns that help with specific features like charts.

Fluent Blocks is essentially a React implementation of many [Fluent][figma-fluent] & [UI Kit][figma-uikit] design patterns for app development based on [`@fluentui/react-components`][fluentui-v9]. This project succeeds [`@fluentui/react-teams`][react-teams].

## ⚠️ Not yet recommended for production

This project is still being vetted. If you want to use Fluent Blocks, please bear in mind even non-prereleases don’t yet come with any particular guarantees.

For the best experience specify a specific version of Fluent Blocks when installing instead of using `~`/`^`/`*`, tags, or ranges. If you encounter issues or when you want to use new features, migrate to a newer version with care.

## Getting started

Using TypeScript and an IDE that supports type inspections will make using this project much easier!

1. Add `react@17`, `react-dom@17` if they’re not in your project already

- Versions of React from `^16.14.0` up to `18` are supported, in case your project already uses a version in that range

3. Depending on your bundler you may need to add `chart.js@^2.9.4`, which you’ll need anyway if you want to use charts from this package
4. Install this package and the icons sprite **with `--save-exact`** using your package manager:

- NPM: `npm install --save --save-exact @fluent-blocks/react @fluent-blocks/basic-icons`
- Yarn: `yarn add --exact @fluent-blocks/react @fluent-blocks/basic-icons`
- PNPM: `pnpm add --save-exact @fluent-blocks/react @fluent-blocks/basic-icons`

Fluent Blocks comes with `@fluentui/react-components@~9.0.1` as a dependency — if you anticipate wanting to use components from that library in your project alongside Fluent Blocks, you should also add it as a direct dependency.

Now anywhere you can use React, you can use Fluent Blocks.

## An example

In this simple example, we render the `View` component using mostly serializeable props, with one use of `Escape`.

```tsx
import { View, Escape } from '@fluent-blocks/react'

return <View {...{
      main: {
        title: [{text: 'Hello, world '}, {icon: 'send'}],
        abstract: 'This is an example using Fluent Blocks. It can do much more, but here’s just a taste.',
        message: {media: {label: 'Hello', illustration: 'hello'}},
        blocks: [
          {
            card: {
              title: [{icon: 'organization'}, {text: ` fakeTitle`}],
              body: [
                {paragraph: 'fakeParagraph'},
                {
                  media: <Escape contentMeetsAccessibilityAndDesignStandards>
                    <img src='/brandImage.svg'
                         style={{marginBlockEnd: '1rem', maxWidth: '12rem'}}/>
                  </Escape>,
                  caption: [{text: 'This caption is part of a '}, {
                    text: 'Figure',
                    variant: 'code'
                  }, {text: ' component, though the above image uses '}, {
                    text: 'Escape',
                    variant: 'code'
                  }, {text: '.'}]
                }
              ],
            },
          },
        ],
      },
      accentScheme: 'teams',
    }} />
```

<Canvas>
  <Story
    name="Introduction"
    args={{
      main: {
        title: [{ text: 'Hello, world ' }, { icon: 'send' }],
        abstract:
          'This is an example using Fluent Blocks. It can do much more, but here’s just a taste.',
        message: { media: { label: 'Hello', illustration: 'hello' } },
        blocks: [
          {
            card: {
              title: [
                { icon: 'organization' },
                { text: ` ${fakeTitle(fake)}` },
              ],
              body: [
                { paragraph: fake('{{lorem.paragraph}}') },
                {
                  media: (
                    <Escape contentMeetsAccessibilityAndDesignStandards>
                      <img
                        src="/brandImage.svg"
                        style={{ marginBlockEnd: '1rem', maxWidth: '12rem' }}
                      />
                    </Escape>
                  ),
                  caption: [
                    { text: 'This caption is part of a ' },
                    {
                      text: 'Figure',
                      variant: 'code',
                    },
                    { text: ' component, though the above image uses ' },
                    {
                      text: 'Escape',
                      variant: 'code',
                    },
                    { text: '.' },
                  ],
                },
              ],
            },
          },
        ],
      },
      accentScheme: 'teams',
    }}
  >
    {seed(1234) || ViewTemplate.bind({})}
  </Story>
</Canvas>

## There’s more to see still!

The components listed in the sidebar are available in Fluent Blocks as of the version shown at the top of this page.

## Technical info, contributing, and getting help.

If you encounter issues, have questions, or want to participate, please don’t hesitate to [write an issue on Github][issues]. You can also [join us on Teams in our community channel][channel].

If you’d like to run the development environment or contribute to this project, please see [the Contributing file](CONTRIBUTING.md).

If you’d like more technical information about Fluent Blocks or if you want to look into contributing, please have a look at the project’s [Github repository][github-readme].

[channel]: https://teams.microsoft.com/l/team/19%3atKKC3lewTMtk4IopGy7Seq7fok-lNW7lGEK-HmzfaKY1%40thread.tacv2/conversations?groupId=4f925ae9-c713-434b-a1f6-44b58ac57210&tenantId=72f988bf-86f1-41af-91ab-2d7cd011db47
[issues]: https://github.com/OfficeDev/fluent-blocks/issues
[figma-fluent]: https://www.figma.com/community/file/836828295772957889/Microsoft-Fluent-Web
[figma-uikit]: https://www.figma.com/community/file/916836509871353159/Microsoft-Teams-UI-Kit
[fluentui-v9]: https://www.npmjs.com/package/@fluentui/react-components
[react-teams]: https://www.npmjs.com/package/@fluentui/react-teams
[github-readme]: https://github.com/OfficeDev/fluent-blocks/tree/next/packages/react#readme
[github-issues]: https://github.com/OfficeDev/fluent-blocks/issues
