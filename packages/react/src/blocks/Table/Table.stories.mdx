import { fake, seed } from 'faker/locale/en_US'
import range from 'lodash/range'

import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs'

import { contextArgTypes } from '../../lib'
import iconSpriteUrl from '../../lib/storybookIconSpriteUrl'
import { Table } from './StorybookTable'

<Meta
  title="Blocks/Table"
  component={Table}
  argTypes={{
    ...contextArgTypes,
    onRowHeaderActivate: { action: 'action' },
  }}
/>

export const TableTemplate = (props) => (
  <Table {...props} iconSpriteUrl={iconSpriteUrl} />
)

# Table

<Canvas withSource="none">
  <Story
    name="Table"
    args={{
      themeName: 'light',
      accentScheme: 'teams',
      caption: fake('{{lorem.sentence}}'),
      captionVisuallyHidden: true,
      rowHeaderColumn: 'c1',
      columns: {
        c1: { title: [{ text: 'Name ' }, { icon: 'info' }] },
        c2: { title: 'Office' },
        c3: { title: 'Email', hideable: true },
      },
      rows: range(32).reduce((acc, r) => {
        acc[`r${r}`] = {
          c1: { cell: fake('{{name.firstName}} {{name.lastName}}') },
          c2: {
            cell: [
              { icon: 'organization' },
              { text: fake(' {{address.city}}') },
            ],
          },
          c3: { cell: fake('{{internet.email}}') },
          ...(r % 5 === 1 && {
            actions: [
              {
                type: 'action',
                actionId: `copy:r${r}`,
                label: 'Copy',
                icon: 'copy',
              },
            ],
          }),
        }
        return acc
      }, {}),
    }}
  >
    {seed(1234) || TableTemplate.bind({})}
  </Story>
</Canvas>

<ArgsTable story="Table" />
