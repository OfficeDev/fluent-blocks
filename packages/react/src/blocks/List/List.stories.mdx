import { fake, seed } from 'faker/locale/en_US'
import range from 'lodash/range'

import iconSpriteUrl from '@fluent-blocks/basic-icons/basic-icons.svg'
import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs'

import { contextArgTypes } from '../../lib'
import { List } from './StorybookList'

<Meta
  title="Blocks/List"
  component={List}
  argTypes={{
    ...contextArgTypes,
    onRowHeaderActivate: { action: 'action' },
  }}
/>

export const ListTemplate = (props) => (
  <List {...props} iconSpriteUrl={iconSpriteUrl} />
)

# List

The List component provides an interactive table as a block component which can
paginate the rows, provide users the ability to perform actions on multiple
rows, and facilitate sorting or filtering. Where these features aren’t needed,
use Table to keep the full experience as smooth as possible.

<Canvas withSource="none">
  <Story
    name="List"
    args={{
      themeName: 'light',
      accentScheme: 'teams',
      caption: fake('{{lorem.sentence}}'),
      captionVisuallyHidden: true,
      rowHeaderColumn: 'c1',
      minWidthVariant: 'auto',
      maxWidthVariant: 'viewportWidth',
      selectable: true,
      columns: {
        c1: {
          title: [{ text: 'Name ' }, { icon: 'info' }],
          sortVariant: 'alphabetical',
        },
        c2: { title: 'Office' },
        c3: { title: 'Email', hideable: true },
      },
      rows: range(32).reduce((acc, r) => {
        acc[`r${r}`] = {
          c1: { cell: fake('{{name.firstName}} {{name.lastName}}') },
          c2: {
            cell: [
              { icon: 'organization' },
              { text: fake(' {{address.city}}') },
            ],
          },
          c3: { cell: fake('{{internet.email}}') },
          ...(r % 5 === 1 && {
            actions: [
              {
                type: 'action',
                actionId: `copy:r${r}`,
                label: 'Copy',
                icon: 'copy',
              },
            ],
          }),
        }
        return acc
      }, {}),
      listActions: [
        {
          type: 'action',
          actionId: 'add',
          label: 'Add',
          icon: 'add',
        },
      ],
    }}
  >
    {seed(1234) || ListTemplate.bind({})}
  </Story>
</Canvas>

<ArgsTable story="List" />
